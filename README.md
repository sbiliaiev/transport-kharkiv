# Transport Kharkiv
Мобільний веб-додаток із розкладом руху громадського транспорту Харкова. До сервісу увійдуть: маршрути транспорту та мапа зупинок; розклад руху кожного окремого виду транспорту; заплановані та незаплановані зміни руху та розкладу. Основна перевага-територіальне охоплення, що включає в себе міський та приміський транспорту, з'єднуючи місто та область.

## Обробка даних
### Основа для даних
За основу були взяті дані з сайту *[danimist.org.ua](https://data.danimist.org.ua/dataset/eec9e685-74b4-4efc-892a-1b39ef6ec045/resource/e1f37ff6-606f-4f0f-a4d6-67278957e38a/download/routestrolleybustramkharkiv.csv)*.
![null](https://pp.vk.me/c626531/v626531422/43cea/asOsKCCrcpA.jpg)
```
routes_name,routes_transport_type,routes_way,routes_direction
1,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«28 Рј/СЂВ» вЂ“ РїСЂРѕСЃРї. Р“РµСЂРѕС—РІ РЎС‚Р°Р»С–РЅРіСЂР°РґР° вЂ“ РїСЂРѕСЃРї. РњР°СЂС€Р°Р»Р° Р–СѓРєРѕРІР° вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РЎС‚Р°РЅС†С–СЏ РјРµС‚СЂРѕ В«РњР°СЂС€Р°Р»Р° Р–СѓРєРѕРІР°В»,both
2,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РїСЂРѕСЃРї. Р–СѓРєРѕРІСЃСЊРєРѕРіРѕВ» вЂ“ РІСѓР». РђРєР°РґРµРјС–РєР° РџСЂРѕСЃРєСѓСЂРё вЂ“ Р‘С–Р»РіРѕСЂРѕРґСЃСЊРєРµ С€РѕСЃРµ вЂ“ РІСѓР». РЎСѓРјСЃСЊРєР° вЂ“ РїСЂРѕСЃРї. РџСЂР°РІРґРё вЂ“ РїСЂРѕСЃРї. РќР°СѓРєРё вЂ“ РІСѓР». РђС…СЃР°СЂРѕРІР° вЂ“ РїСЂРѕСЃРї. Р›СЋРґРІС–РіР° РЎРІРѕР±РѕРґРё вЂ“ РїСЂРѕСЃРї. РџРµСЂРµРјРѕРіРё вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РїСЂРѕСЃРї. РџРµСЂРµРјРѕРіРёВ»,both
3,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». Р”РІР°РЅР°РґС†СЏС‚РѕРіРѕ РљРІС–С‚РЅСЏВ» вЂ“ РІСѓР». Р”РІР°РЅР°РґС†СЏС‚РѕРіРѕ РљРІС–С‚РЅСЏ вЂ“ РїСЂРѕСЃРї. РћР»РµРєСЃР°РЅРґСЂС–РІСЃСЊРєРёР№ вЂ“ РїСЂРѕСЃРї. Р“РµСЂРѕС—РІ РЎС‚Р°Р»С–РЅРіСЂР°РґР° вЂ“ РїСЂРѕСЃРї. Р“Р°РіР°СЂС–РЅР° вЂ“ РІСѓР». Р’РµСЂРЅР°РґСЃСЊРєРѕРіРѕ вЂ“ РїСЂРѕРІ. РџРѕРґС–Р»СЊСЃСЊРєРёР№ вЂ“ РІСѓР». РљСѓР·РЅРµС‡РЅР° вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». РЈРЅС–РІРµСЂСЃРёС‚РµС‚СЃСЊРєР°В»,straight
3,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». РЈРЅС–РІРµСЂСЃРёС‚РµС‚СЃСЊРєР°В» вЂ“ РїСЂРѕРІ. РЎРѕР»СЏРЅРёРєС–РІСЃСЊРєРёР№ вЂ“ РїСЂРѕРІ. РџРѕРґС–Р»СЊСЃСЊРєРёР№ вЂ“ РІСѓР». Р’РµСЂРЅР°РґСЃСЊРєРѕРіРѕ вЂ“ РїСЂРѕСЃРї. Р“Р°РіР°СЂС–РЅР° вЂ“ РїСЂРѕСЃРї. Р“РµСЂРѕС—РІ РЎС‚Р°Р»С–РЅРіСЂР°РґР° вЂ“ РїСЂРѕСЃРї. РћР»РµРєСЃР°РЅРґСЂС–РІСЃСЊРєРёР№ вЂ“ РїСЂРѕСЃРї. Р†РЅРґСѓСЃС‚СЂС–Р°Р»СЊРЅРёР№ вЂ“ РїСЂРѕСЃРї. РњРѕСЃРєРѕРІСЃСЊРєРёР№ вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». Р”РІР°РЅР°РґС†СЏС‚РѕРіРѕ РљРІС–С‚РЅСЏВ»,reverse
5,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РђРµСЂРѕРїРѕСЂС‚В» вЂ“ РІСѓР». РђРµСЂРѕС„Р»РѕС‚СЃСЊРєР° вЂ“ РїСЂРѕСЃРї. Р“Р°РіР°СЂС–РЅР° вЂ“ РІСѓР». Р’РµСЂРЅР°РґСЃСЊРєРѕРіРѕ вЂ“ РїСЂРѕРІ. РџРѕРґС–Р»СЊСЃСЊРєРёР№ вЂ“ РІСѓР». РљСѓР·РЅРµС‡РЅР° вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». РЈРЅС–РІРµСЂСЃРёС‚РµС‚СЃСЊРєР°В»,straight
5,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». РЈРЅС–РІРµСЂСЃРёС‚РµС‚СЃСЊРєР°В» вЂ“ РїСЂРѕРІ. РЎРѕР»СЏРЅРёРєС–РІСЃСЊРєРёР№ вЂ“ РїСЂРѕРІ. РџРѕРґС–Р»СЊСЃСЊРєРёР№ вЂ“ РІСѓР». Р’РµСЂРЅР°РґСЃСЊРєРѕРіРѕ вЂ“ РїСЂРѕСЃРї. Р“Р°РіР°СЂС–РЅР° вЂ“ РІСѓР». РђРµСЂРѕС„Р»РѕС‚СЃСЊРєР° вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РђРµСЂРѕРїРѕСЂС‚В»,reverse
6,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«Р—Р°Р»С–Р·РЅРёС‡РЅР° СЃС‚Р°РЅС†С–СЏ В«РћСЃРЅРѕРІР°В» вЂ“ РІСѓР». Р’Р°Р»РґР°Р№СЃСЊРєР° вЂ“ РІСѓР». Р”РµРїРѕРІСЃСЊРєР° вЂ“ РІСѓР». РџС–РІРґРµРЅРЅРѕРїСЂРѕРµРєС‚РЅР° вЂ“ РїСЂРѕСЃРї. Р“Р°РіР°СЂС–РЅР° вЂ“ РІСѓР». Р’РµСЂРЅР°РґСЃСЊРєРѕРіРѕ вЂ“ РїСЂРѕРІ. РџРѕРґС–Р»СЊСЃСЊРєРёР№ вЂ“ РІСѓР». РљСѓР·РЅРµС‡РЅР° вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». РЈРЅС–РІРµСЂСЃРёС‚РµС‚СЃСЊРєР°В»,straight
6,trolleybus,Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«РІСѓР». РЈРЅС–РІРµСЂСЃРёС‚РµС‚СЃСЊРєР°В» вЂ“ РїСЂРѕРІ. РЎРѕР»СЏРЅРёРєС–РІСЃСЊРєРёР№ вЂ“ РїСЂРѕРІ. РџРѕРґС–Р»СЊСЃСЊРєРёР№ вЂ“ РІСѓР». Р’РµСЂРЅР°РґСЃСЊРєРѕРіРѕ вЂ“ РїСЂРѕСЃРї. Р“Р°РіР°СЂС–РЅР° вЂ“ РІСѓР». РџС–РІРґРµРЅРЅРѕРїСЂРѕРµРєС‚РЅР° вЂ“ РІСѓР». Р”РµРїРѕРІСЃСЊРєР° вЂ“ РІСѓР». Р’Р°Р»РґР°Р№СЃСЊРєР° вЂ“ Р РѕР·РІРѕСЂРѕС‚РЅРµ РєС–Р»СЊС†Рµ В«Р—Р°Р»С–Р·РЅРёС‡РЅР° СЃС‚Р°РЅС†С–СЏ РћСЃРЅРѕРІР°В»,reverse

```
### Подальша обробка
Ці дані були конвертовані у формат JSON, щоб у подальшому їх легко було оброблювати. Далі ми написали парсер, котрий приймав на вхід початкові дані такого формату [посилання](https://github.com/sbiliaiev/transport-kharkiv/blob/master/data/danimist.json)
```
"routes_way": 
        "Розворотне кільце «просп. Жуковського» – вул. Академіка Проскури – Білгородське шосе – 
        вул. Сумська – просп. Правди – просп. Науки – вул. Ахсарова – просп. Людвіга Свободи – 
        просп. Перемоги – Розворотне кільце «просп. Перемоги»"
```
а на виході давав дані в такому вигляді, щоб з ними зручно було працювати [посилання](https://github.com/sbiliaiev/transport-kharkiv/blob/master/data/danimist_converted_2_arrays.json)
```
"routes_way_forward": [
    "Розворотне кільце «просп. Жуковського»",
    "вул. Академіка Проскури",
    "Білгородське шосе",
    "вул. Сумська",
    "просп. Правди",
    "просп. Науки",
    "вул. Ахсарова",
    "просп. Людвіга Свободи",
    "просп. Перемоги",
    "Розворотне кільце «просп. Перемоги»"
],
"routes_way_back": [
    "Розворотне кільце «просп. Перемоги»",
    "просп. Перемоги",
    "просп. Людвіга Свободи",
    "вул. Ахсарова",
    "просп. Науки",
    "просп. Правди",
    "вул. Сумська",
    "Білгородське шосе",
    "вул. Академіка Проскури",
    "Розворотне кільце «просп. Жуковського»"
]
```
### Геолокаційні точки
Для роботи з картами, потрібно мати список геолокаційних точок, тому наступним етапом було знаходження на карті кожної зупинки і копіювання її широти/довготи із подальшим занесенням у наші дані [посилання](https://github.com/sbiliaiev/transport-kharkiv/blob/master/data/geopoints.json):
```
"type": "trolleybus",
"number": 6,
"roadway": {
        "lat": [49.984614, 49.984905, 49.981250, 49.978994, 49.977203, 49.972666,49.967388,
                49.961448, 49.956158, 49.951179, 49.945923, 49.940149, 49.935358, 49.930830, 
                49.930460, 49.930873, 49.934648, 49.936107, 49.934349, 49.931377, 49.930176, 
                49.931453, 49.936465, 49.940449, 49.947068, 49.953085, 49.957423, 49.962097, 
                49.968201, 49.973281, 49.978210, 49.979946, 49.982032, 49.985791, 49.984614],
        "lng": [36.231342, 36.235333, 36.242183, 36.247494, 36.251374, 36.257776, 36.258952,
                36.258786, 36.259384, 36.259906, 36.259645, 36.260479,  36.261195, 36.261151, 
                36.256375, 36.250805, 36.243981, 36.240887, 36.244091, 36.250155, 36.253683, 
                36.262590, 36.261529, 36.260870, 36.260514, 36.260215, 36.259811, 36.259107, 
                36.259482, 36.257552, 36.249858, 36.245874, 36.241014, 36.235596, 36.231342]
}
```

## Розробка
Суть проекту полягає у швидкій зміні маршруту транспорту в разі виникнення перешкодження стандартного шляху і повідомлення про це пасажирів. Це планується робити за допомогою зворотнього зв'язку із користувачами, тому розробка мобільного додатку була спрямована в першу чергу на них. Веб-додаток є панеллю адіміністрації, куди приходять повідомлення від користувачів про перешкодження руху певного транспорту, і де адміністрація може внести зміни у існуючий маршрут у разі підтвердження перешкоди шляху траспорту (дтп/перекритий центр). Також адміністрація має можливість додати нові маршрути у базу даних чи змінити існуючі.
### Інтерактивний прототип
Для розробки інтерактивного прототипу був використаний сервіс [Marvel](http://marvelapp.com).

[Посилання на інтерактивний прототип](https://marvelapp.com/1g8f37d)

### Мобільний додаток
Розробка мобільного додатку ведеться для платформи [Android](https://www.android.com/), так як в Харкові популяція Android-пристроїв займає лідируючу позицію. В якості додаткових бібліотек використовуються [Backendless](http://backendless.com) та [Google Maps API](https://developers.google.com/maps/).

[Посилання на код мобільний додаток](https://github.com/OxxxyAction/transport_kh_android)

### Веб-додаток
Розробка веб-додатку проводиться із використанням бібліотеки [React](https://facebook.github.io/react/) із допоміжними [React Router](https://github.com/ReactTraining/react-router) та [React Bootstrap](https://github.com/react-bootstrap/react-bootstrap). В якості зв'язку із базою даних використовується [Backendless](http://backendless.com).

[Посилання на код веб-додатка](https://github.com/sbiliaiev/transport-kharkiv)

### База даних
Для розробки альфа-версії додатка було прийнято рішення використовувати MBaaS систему [Backendless](http://backendless.com), що, по суті, являє собою хмарне сховище даних зі своїм АРІ, за допомогою якого можна оперувати інформацією у БД.

[Посилання на експорт БД](http://goo.gl/i4BIxx)

## Обґрунтування проблеми із даними
На даний момент наш прототип обмежений у використанні графіків руху громадського транспорту. На жаль у відкритих джерелах (ні у запропонованій базі даних, ні у сервісах гугл, чи джерелах, що належать до юрисдикції міської влади) немає актуальної інформації, щодо конкретного часу відправлення від зупинок, та кількості одиниць, що обслуговують маршрути за різних умов (година дня, день тижня, варіанти руху на випадок передбачених, або не передбачуваних перешкод у русі). 
Таким чином, зараз ми намагаємося здобути цю інформацію двома паралельними шляхами:
- Юридичний: нами було подано два інформаційні запити, стосовно актуальних графіків руху трамваїв та троллейбусів.  Однак мотивованої відповіді ми не отримали, у результаті чого зараз ми формуємо позов для отримання цих даних.
- Другий спосіб передбачає отримання данних на паперових носіях від тих хто має їх у наявності. Причиною такого кроку є бажання команди зробити працюючий додаток, навіть якщо офіційні предстваники підприємства "Міськелектротранссервіс" будуть затягувати свої дії.
